<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, maximum-scale=1.0" />

    <title>Sue Jo's HCDE 439 Physical Computing Page!</title>

    <link href="style.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <h1>Sue Jo's Assignment 3: Input Output!</h1>
    <section id="Overview">
      <h3>OVERVIEW</h3>
      <p>
        I work at a smart home company, and the CIO wants me to prototype a new visualization using a variable resistance sensor in a voltage divider.
      </p>
    </section>
    <section id="Schematic">
      <h3>SCHEMATIC</h3>
      <img src="a3-schematic.JPEG" /, class="a2-schematic-img">
      <p>
        For this assignment, I used one red LED and one green LED (both 2V) and its own resistor so that each LED can be controlled independently. I used a 220Ω resistor for each LED.
        <br><br> Here's my calculation:
        <br> V_R = V_pin - V_LED = 5V - 2V = 3V
        <br> I = V_R / R = 3V / 0.02A = 150Ω
        <br><br> And then I rounded it up to 220Ω resistor which was provided in the kit.
        <br> For the photoresistor, I used 10kΩ resistor, calculated as below:
        <br><br> R2 = √(R_low*R_high) <br> R2 = √(5k*162k) = 28.4kΩ <br><br> So I used the 10kΩ resistor, which was the closest available value in the kit to the calculated resistance(because the next available option was 100kΩ).
      </p>
    </section>
    <section id="Circuit">
      <h3>CIRCUIT</h3>
      <p>
        I made a prototype that senses the ambient brightness using a photoresistor that changes the LED indicators based on the light level.
      </p>
          <div class="grid">
            <figure>
              <img src="a3-circuit.jpg" /, class="circuit-img">
              <figcaption> Circuit operation (Image) </figcaption>
            </figure>
            <figure>
              <img src="a3-circuit-gif.gif" /, class="circuit-img">
              <figcaption> Circuit operation (GIF) </figcaption>
            </figure>
          </div>
    </section>
    <section id="Arduino">
      <h3>ARDUINO</h3>
      <p>The requirements for the code were to use analogWrite(), analogRead(), map(), and if statement. I started coding with the built in example "AnalogInOutSerial" provided by Arduino and edited it to control two LEDs with an if statement. (Source: <a href="https://docs.arduino.cc/built-in-examples/analog/AnalogInOutSerial/">https://docs.arduino.cc/built-in-examples/analog/AnalogInOutSerial/)</a>
      </p>
      <pre><code>
// These constants won't change. They're used to give names to the pins used:
const int analogInPin = A0;  // Analog input pin that the potentiometer is attached to
const int analogOutRedPin = 6;  // Sets pin 6 as the PWM output pin for the red LED
const int analogOutGreenPin = 9; // Sets pin 9 as the PWM output pin for the green LED

int sensorValue = 0;  // value read from the pot
int outputValue = 0;  // value output to the PWM (analog out)
int sensorConstrainValue = 0; // stores the constrained sensor value

void setup() {
  // initialize serial communications at 9600 bps:
  Serial.begin(9600);
}

void loop() {
  // read the analog in value:
  sensorValue = analogRead(analogInPin);
  // limits the sensor value to the range 100-990
  sensorConstrainValue = constrain(sensorValue, 100, 990);
  // map it to the range of the analog out:
  outputValue = map(sensorConstrainValue, 100, 990, 0, 255);
  // turns on the red LED & turns off the green LED when the mapped
  // sensor value is in lower half of the range
  if(outputValue <= 128){
    analogWrite(analogOutRedPin, outputValue);
    analogWrite(analogOutGreenPin, 0);
  } // turns on the green LED & turns off the red LED when the mapped
  // sensor value is in upper half of the range
  else {
    analogWrite(analogOutRedPin, 0);
    analogWrite(analogOutGreenPin, outputValue);
  }
  // print the results to the Serial Monitor:
  Serial.print("sensor = ");
  Serial.print(sensorValue);
  Serial.print("\t output = ");
  Serial.println(outputValue);

  // wait 2 milliseconds before the next loop for the analog-to-digital
  // converter to settle after the last reading:
  delay(2);
}
      </code></pre>
    </section>
    <section id="Questions">
      <h3>ADDITIONAL QUESTIONS</h3>
      <h4>
        1: In your voltage divider, can the variable resistor be either R1 or R2 or does it need to be one or the other? Justify your answer with example calculations.
      </h4>
      <img src="a3-q1.jpeg" />
      <p>
        As explained in the example calculation, the variable resistor can be placed as either R1 or R2, because both form a valid voltage divider and produce a voltage in a range of 0V~5V. The only difference is that the direction of change of the analogRead value will be reversed.
      </p>
      <h4>
        2: Draw a graph where the x-axis is time and the y-axis is voltage. Plot the voltage at V-measure (where your pin is reading the voltage) of your voltage divider of your shared gif/video.
      </h4>
      <img src="a3-q2.jpg" />
      <p>
        The voltage at V-measure (A0) changes over time as I cover and uncover the photoresistor. In my code, I constrained the value from 100 to 990, so the V-measure will be in a range of 0.49~4.84V.
      </p>
      <h4>
        3: AnalogWrite and analogRead are respectively 8-bit and 10-bit values. Imagine you had 10-bit PWM and a 16-bit analog-to-digital converter instead. How would this change your map() code? Explain your answer.
      </h4>
      <p>
        Originally with the 8-bit and 10-bit values, map() code is map(sensorValue, 0, 1023, 0, 255). So with those new values, the map code will be map(sensorValue, 0, 65523, 0, 1023).
      </p>
    </section>
  </body>
</html>
